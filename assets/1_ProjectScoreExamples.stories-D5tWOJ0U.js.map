{"version":3,"file":"1_ProjectScoreExamples.stories-D5tWOJ0U.js","sources":["../../src/stories/1_ProjectScoreExamples.stories.tsx"],"sourcesContent":["import React from \"react\";\nimport { StoryObj, Meta } from \"@storybook/react\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport {\n  ProjectScore,\n  getScoreJson,\n  setScore,\n} from \"../components/ProjectScore\";\nimport {\n  DownloadButton,\n  ImportButton,\n  LocalSave,\n  ModalDialog,\n  exampleData,\n} from \"./common\";\n\nconst meta = {\n  title: \"pufu-editor/Examples\",\n  component: ProjectScore,\n  parameters: {\n    layout: \"fullscreen\",\n    docs: {\n      description: {\n        component: `\nプ譜エディターは書籍『予定通り進まないプロジェクトの進め方』（著: 前田考歩、後藤洋平）で<br>\n紹介されているプロジェクト譜（プ譜）を Web ブラウザで編集・表示するためのエディターです。<br>\nGithub: <a href=\"https://github.com/goto-lab/pufu-editor\" target=\"_blank\">goto-lab/pufu-editor</a>`,\n      },\n    },\n  },\n  tags: [\"autodocs\"],\n} satisfies Meta<typeof ProjectScore>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\nconst key1 = \"example1\";\nconst key2 = \"example2\";\n\nconst isMobile = () => {\n  if (\n    window.matchMedia &&\n    window.matchMedia(\"(max-device-width: 640px)\").matches\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport const Example1: Story = {\n  args: {\n    uniqueKey: key1,\n    initScore: exampleData,\n    preview: true,\n    mobile: isMobile(),\n  },\n  render: function Comp({ ...args }) {\n    const [isOpen, setIsOpen] = React.useState(false);\n    const [scoreText, setScoreText] = React.useState(\"\");\n    const [error, setError] = React.useState(\"\");\n    return (\n      <>\n        <DownloadButton scoreKey={key1} kind=\"json\" />\n        <DownloadButton scoreKey={key1} kind=\"markdown\" />\n        <DownloadButton scoreKey={key1} kind=\"png\" />\n        <DownloadButton scoreKey={key1} kind=\"svg\" />\n        <ImportButton\n          onClick={() => {\n            const json = getScoreJson(key1);\n            setScoreText(json!);\n            setIsOpen(true);\n            setError(\"\");\n          }}\n        />\n        <p className=\"ml-8\">ID: {key1}</p>\n        <meta.component {...args}></meta.component>\n        <ModalDialog\n          open={isOpen}\n          text={scoreText}\n          error={error}\n          onCancel={() => setIsOpen(false)}\n          onChange={(text: string) => {\n            setScoreText(text);\n          }}\n          onOk={() => {\n            try {\n              setError(\"\");\n              setScore(key1, scoreText);\n              setIsOpen(false);\n            } catch (e) {\n              console.error(e);\n              if (e instanceof Error) {\n                setError(e.message);\n              }\n            }\n          }}\n        />\n      </>\n    );\n  },\n};\n\nexport const Example2: Story = {\n  args: {\n    uniqueKey: key2,\n    feedback: true,\n    mobile: isMobile(),\n  },\n  render: function Comp({ ...args }) {\n    const [isOpen, setIsOpen] = React.useState(false);\n    const [scoreText, setScoreText] = React.useState(\"\");\n    const [error, setError] = React.useState(\"\");\n    const [isLocalSave, setIsLocalSave] = React.useState(false);\n    const [memo, setMemo] = React.useState(\"\");\n    return (\n      <>\n        <DownloadButton scoreKey={key2} kind=\"json\" />\n        <DownloadButton scoreKey={key2} kind=\"markdown\" />\n        <DownloadButton scoreKey={key2} kind=\"png\" />\n        <DownloadButton scoreKey={key2} kind=\"svg\" />\n        <ImportButton\n          onClick={() => {\n            const json = getScoreJson(key2);\n            setScoreText(json!);\n            setIsOpen(true);\n            setError(\"\");\n          }}\n        />\n        <LocalSave\n          checked={isLocalSave}\n          onClick={(status: boolean) => {\n            setIsLocalSave(status);\n          }}\n          onLoad={() => {\n            const json = localStorage.getItem(key2);\n            if (json) {\n              setScore(key2, json);\n            }\n            const localStorageMemo = localStorage.getItem(`${key2}-memo`);\n            if (localStorageMemo) {\n              setMemo(localStorageMemo);\n            }\n          }}\n          onSave={() => {\n            const json = getScoreJson(key2);\n            if (json) {\n              localStorage.setItem(key2, json);\n            }\n            localStorage.setItem(`${key2}-memo`, memo);\n          }}\n        />\n        <p className=\"ml-8\">ID: {key2}</p>\n        <meta.component {...args}></meta.component>\n        <div className=\"p-2\">\n          <TextareaAutosize\n            className=\"\n              block p-2.5 w-full text-sm text-gray-900 bg-gray-50\n              rounded-lg border border-gray-300\n              focus:outline-none focus:ring-blue-300 focus:border-blue-300\n            \"\n            minRows={2}\n            value={memo}\n            onChange={(e) => setMemo(e.target.value)}\n            placeholder=\"メモを入力\"\n          ></TextareaAutosize>\n        </div>\n        <ModalDialog\n          open={isOpen}\n          text={scoreText}\n          error={error}\n          onCancel={() => setIsOpen(false)}\n          onChange={(text: string) => {\n            setScoreText(text);\n          }}\n          onOk={() => {\n            try {\n              setError(\"\");\n              setScore(key2, scoreText);\n              setIsOpen(false);\n            } catch (e) {\n              console.error(e);\n              if (e instanceof Error) {\n                setError(e.message);\n              }\n            }\n          }}\n        />\n      </>\n    );\n  },\n};\n"],"names":["meta","title","component","ProjectScore","parameters","layout","docs","description","tags","key1","key2","isMobile","window","matchMedia","matches","Example1","args","uniqueKey","initScore","exampleData","preview","mobile","render","isOpen","setIsOpen","React","useState","scoreText","setScoreText","error","setError","jsxs","Fragment","jsx","DownloadButton","ImportButton","json","getScoreJson","ModalDialog","text","setScore","e","console","Error","message","Example2","feedback","isLocalSave","setIsLocalSave","memo","setMemo","LocalSave","status","localStorage","getItem","localStorageMemo","setItem","TextareaAutosize","target","value","source","originalSource"],"mappings":"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"}